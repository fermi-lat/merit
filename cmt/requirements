package merit
version v6r16p1
# $Id$

branches doc

use GlastPolicy v*

apply_pattern packageShr

private
#--------------------------------------------------------------
use ntupleWriterSvc v*
use classification v2*
use astro *
use AnalysisNtuple v*
use GlastSvc *
use Event *
use GuiSvc v3*
use OnboardFilter v1*
use facilities *
use LdfEvent *

# read/ write ROOT trees (any old ROOT will do)
use ROOT * IExternal
 
apply_pattern package_Cshlibflags 


# this to allow includes of internal "package" 
macro_prepend includes "-I ../src " WIN32 "/I ..\src "


#static library
macro source "*.cxx" WIN32 "*.h *.cxx"

library merit_lib -no_share \
   $(source)\
  -s=analysis $(source)

#component library with meritAlg

library merit   ${meritAlg_h} meritAlg/*.cxx Dll/*.cxx $(libs) 

macro merit_linkopts      "-L $(meritDir) -lmerit_lib"   WIN32 ""
macro merit_app_linkopts  $(merit_linkopts)
macro test_merit_linkopts $(merit_linkopts)
macro write_text_linkopts $(merit_linkopts)
macro run_classification_linkopts $(merit_linkopts)
macro fastFilter_linkopts $(merit_linkopts)

macro libs ""   WIN32   "$(meritDir)/merit_lib.lib

#set MERIT_OUTPUT_FILE "$(MERITROOT)/cmt/merit.txt"
set IM_FILE "$(MERITROOT)/xml/classification.imw"

# IM xml file for fastFilter
set IM_FILE_FILTER  "$(MERITROOT)/xml/CTPruner_DC1.imw"


application merit_app app/meritapp.cxx app/RootTuple.cxx $(libs)

# application to rewrite the IM variables
macro run_classification $(merit_linkopts) 
application run_classification app/run_classification_main.cxx app/RootTuple.cxx $(libs)

# application to read merit tuple and reject background-type events
macro fastFilter $(merit_linkopts)
application fastFilter app/fastFilter.cxx app/RootTuple.cxx PruneTree.cxx $(libs)

# application to write out the tuple as a text file
macro write_text $(merit_linkopts) 
application write_text app/write_text_main.cxx app/RootTuple.cxx $(libs)

# application to read merit and write selected events

public
set MERIT_INPUT_FILE "$(MERITROOT)/src/test/merit100.root"
application test_merit app/meritapp.cxx  app/RootTuple.cxx $(libs)
